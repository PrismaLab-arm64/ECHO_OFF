<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="ECHO_OFF - Comunicacion P2P cifrada estilo Java Console">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ECHO_OFF v1.4.0</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="icon-app.png">
    <link rel="apple-touch-icon" href="icon-app.png">
</head>
<body>
    <!-- PWA Install Prompt -->
    <div id="install-prompt" class="install-prompt hidden">
        <div class="dos-window">
            <div class="dos-title-bar">
                <span>INSTALAR APLICACION</span>
                <button class="dos-close" id="btn-cancel-install">X</button>
            </div>
            <div class="dos-content">
                <p>Instalar ECHO_OFF en este equipo?</p>
                <p>La aplicacion funcionara sin conexion</p>
                <div class="dos-buttons">
                    <button id="btn-install" class="dos-button">[ SI ]</button>
                    <button class="dos-button">[ NO ]</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Boot Screen -->
    <div id="splash-screen" class="boot-screen active">
        <div class="boot-content">
            <pre class="boot-text">
ECHO_OFF Secure Communications System v1.4.0
Copyright (C) 2026 CyberSec Division

Initializing P2P Protocol...      [OK]
Loading Encryption Module...      [OK]
Starting PeerJS Service...        [OK]

></pre>
            <span class="cursor-blink">_</span>
        </div>
    </div>
    
    <!-- Main Terminal -->
    <div id="terminal" class="dos-terminal hidden">

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-header">
                <p class="title-main">ECHO_OFF</p>
                <p class="title-subtitle">Sistema de Comunicacion Segura</p>
            </div>
            
            <div class="welcome-info">
                <p>Version: 1.4.0</p>
                <p>Protocolo: Peer-to-Peer (P2P)</p>
                <p>Encriptacion: End-to-End</p>
                <p>Almacenamiento: NINGUNO</p>
                <p>Privacidad: MAXIMA</p>
            </div>

            <p class="prompt-text">> Seleccione una opcion:</p>
            
            <div class="dos-button-container">
                <button id="btn-create-room" class="dos-button primary">
                    > Crear nueva sala
                </button>
                <button id="btn-join-room" class="dos-button primary">
                    > Unirse a sala existente
                </button>
            </div>
        </div>

        <!-- Room Creation Screen -->
        <div id="create-room-screen" class="screen">
            <div class="screen-header">
                <p class="screen-title">Crear Nueva Sala</p>
            </div>

            <p>> Generando ID unico de sala...</p>
            <p></p>
            <p>ID DE SALA GENERADO:</p>
            
            <div class="dos-id-display">
                <input type="text" id="room-id" readonly class="dos-input-id" />
            </div>
            
            <div class="dos-button-row">
                <button id="btn-copy-id" class="dos-button-small">Copiar</button>
                <button id="btn-regenerate-id" class="dos-button-small">Regenerar</button>
            </div>

            <p></p>
            <p class="warning-text">ADVERTENCIA: Comparta este ID solo con usuarios de confianza.</p>
            <p class="warning-text">Cualquier persona con este ID puede conectarse a su sala.</p>
            <p></p>
            <p>> Estado: Esperando conexiones...</p>
            <p></p>
            
            <button id="btn-back-from-create" class="dos-button">
                > Volver al menu
            </button>
        </div>

        <!-- Room Join Screen -->
        <div id="join-room-screen" class="screen">
            <div class="screen-header">
                <p class="screen-title">Unirse a Sala</p>
            </div>

            <p>> Ingrese el ID de la sala:</p>
            <p></p>
            <p>ID DEL PEER:</p>
            
            <div class="dos-input-group">
                <input type="text" id="peer-id-input" placeholder="ECHO_XXXXXXXXXX" class="dos-input" />
            </div>

            <p>> Presione ENTER para conectar</p>
            
            <div class="dos-button-group">
                <button id="btn-connect" class="dos-button primary">
                    > Conectar
                </button>
                <button id="btn-back-from-join" class="dos-button">
                    > Cancelar
                </button>
            </div>
        </div>

        <!-- Chat Screen -->
        <div id="chat-screen" class="screen">
            <div class="dos-chat-header">
                <div class="chat-header-info">
                    <p class="chat-title">CANAL SEGURO | PEER: <span id="chat-peer-id" class="peer-id"></span></p>
                </div>
                <button id="btn-disconnect" class="dos-button-close">> Desconectar</button>
            </div>
            
            <div id="messages-container" class="dos-messages"></div>
            
            <div class="dos-input-bar">
                <span class="prompt">></span>
                <input 
                    type="text" 
                    id="message-input" 
                    class="dos-message-input"
                    placeholder="Escriba su mensaje..."
                    autocomplete="off"
                />
                <button id="btn-send" class="dos-send-button">Enviar</button>
            </div>
        </div>
    </div>

    <!-- PeerJS CDN -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
